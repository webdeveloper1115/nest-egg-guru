var D3=function(){function t(t,e,a,r){var c=t.length>6,o=c?20:40,d=c?15:25,u=c?_.clone(l).reverse():_.clone(n).reverse(),f=c?_.clone(i):_.clone(s),p=e||950,g=a||450,h=r||85,m=d3.scale.linear().domain([0,1.1*_.max(_.clone(t))]).range([0,p]),x=d3.scale.linear().domain([0,u.length]).range([0,g]),k=d3.scale.quantize().domain([0,u.length]).range(f.reverse()),v=d3.scale.ordinal().range(_.clone(f)),y=d3.select(".bar-chart").append("svg").attr({width:p+100,height:g+100}),b=(y.append("rect").attr({width:p,height:g}).style({fill:"transparent",stroke:"black"}).attr("transform","translate(80, 0)"),d3.svg.axis().orient("bottom").scale(m).outerTickSize(0).innerTickSize(-g).tickPadding(10).ticks(11).tickFormat(function(t,e){return"$"+numberWithCommas(t)})),A=d3.svg.axis().orient("left").scale(x).outerTickSize(0).innerTickSize(-p).tickFormat(function(t,e){return u[e]}).tickPadding(15).tickValues(d3.range(u.length)),z=(y.append("g").attr("transform","translate(80, 0)").attr("id","yaxis").call(A).selectAll("text").attr("y",o),y.append("g").attr("transform","translate(80, "+g+")").attr("id","xaxis").call(b).selectAll("text").attr("transform","rotate(-40) translate(-60, -10)"),y.append("g").attr("transform","translate(80, "+d+")").attr("class","bar").selectAll("rect").data(t.reverse()).enter().append("rect").attr("height",d).attr({x:0,y:function(t,e){return x(e)}}).style("fill",function(t,e){return k(e)}).attr("width",function(t){return m(t)}),d3.select(".bar").selectAll("text").data(t).enter().append("text").attr({x:function(t){return m(t)+10},y:function(t,e){return x(e)+(d-5)}}).text(function(t){return"$"+numberWithCommas(t)}).style({fill:"6D777D","font-size":"13px"}),d3.select(".horizontal-bar").append("svg").attr({width:p+100,height:50}).selectAll(".legend").data(_.clone(u)).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate("+-(e*h)+", 0)"}));z.append("circle").attr("r","8").attr("cy","10").attr("cx",p+15).style("fill",v),z.append("text").attr("x",p).attr("y",9).attr("dy",".35em").style("text-anchor","end").style("font-size",12).text(function(t){return t})}function e(t,e,a,r,c){var o,d=_.pluck(_.pluck(t,"values")[0],"name"),u=d.length>6,f=u?_.clone(i):_.clone(s),p=u?d:d,g=u?_.clone(l):_.clone(n),h=e||900,m=a||450,x=r||85;switch(c){case 1:o=450;break;case 2:o=225;break;case 3:o=150;break;case 4:o=115;break;case 5:o=93;break;case 6:o=80;break;case 7:o=70;break;case 8:o=60;break;case 9:o=55;break;default:o=50}var k=d3.scale.ordinal().range(f),v=d3.scale.ordinal().range(_.clone(f).reverse()),y=d3.scale.ordinal().domain(t.map(function(t){return t.year})).rangeRoundBands([0,h],.1),b=d3.scale.ordinal().domain(p).rangeRoundBands([0,y.rangeBand()]),A=d3.scale.linear().range([m,0]).domain([0,d3.max(t,function(t){return d3.max(t.values,function(t){return t.value})})]),z=d3.svg.axis().scale(y).orient("bottom").outerTickSize(0).innerTickSize(-m).tickPadding(30).ticks(p.length).tickFormat(function(t,e){return t}),w=d3.svg.axis().scale(A).orient("left").innerTickSize(-h).tickPadding(10).tickFormat(function(t){return"$"+numberWithCommas(t)}),S=d3.select(".vertical-bar-chart").append("svg").attr({width:h+100,height:m+120}).append("g"),F=(S.append("rect").attr({width:h,height:m}).style({fill:"transparent",stroke:"black"}).attr("transform","translate(100, 0)"),S.append("g").attr("transform","translate(100,"+m+")").attr("class","xaxis").call(z).selectAll("line").attr("transform","translate("+o+", 0)"),S.append("g").attr("transform","translate(100, 0)").attr("class","yaxis").call(w).append("text").attr("y",6),S.selectAll(".year").data(t).enter().append("g").attr("class","year").attr("transform",function(t){return"translate("+(y(t.year)+107)+",0)"})),T=(F.selectAll("rect").data(function(t){return t.values}).enter().append("rect").attr("width",b.rangeBand()-3).attr("x",function(t){return b(t.name)}).attr("y",function(t){return A(t.value)}).attr("height",function(t){return m-A(t.value)}).style("fill",function(t){return k(t.name)}),d3.select(".vertical-bar").append("svg").attr({width:h+100,height:30}).selectAll(".legend").data(_.clone(g).reverse()).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate("+-(e*x)+", 0)"}));T.append("circle").attr("r","8").attr("cy","10").attr("cx",h+15).style("fill",v),T.append("text").attr("x",h).attr("y",9).attr("dy",".35em").style("text-anchor","end").style("font-size",12).text(function(t){return t})}function a(t,e,a,r,c){var o=t.length>6,d=o?_.clone(l):_.clone(n),u=o?_.clone(i):_.clone(s),f=e||900,p=a||450,g=r||85,h=c||0,m=d3.scale.ordinal().range(_.clone(u).reverse()),x=d3.scale.linear().domain([0,d.length]).range([0,f]),k=d3.scale.linear().domain([0,1.1*_.max(_.clone(t))]).range([p,0]),v=d3.svg.axis().scale(x).orient("bottom").outerTickSize(0).innerTickSize(-p).tickPadding(15).ticks(d.length).tickFormat(function(t,e){return d[e]}),y=d3.svg.axis().scale(k).orient("left").outerTickSize(0).innerTickSize(-f).tickPadding(15).ticks(t.length).tickFormat(function(t,e){return"$"+numberWithCommas(t)}),b=d3.svg.area().x(function(t,e){return x(e)}).y0(p).y1(function(t){return k(t)}),A=d3.select(".line-chart").append("svg").attr({width:f+100+h,height:p+100}).append("g").attr("transform","translate(20,0)"),z=(A.append("rect").attr({width:f+h,height:p}).style({fill:"transparent",stroke:"black"}).attr("transform","translate(80, 20)"),A.append("g").attr("transform","translate(80, 20)").attr("class","yaxis").call(y),A.append("g").attr("transform","translate(120,"+(p+20)+")").attr("class","xaxis").call(v),A.append("linearGradient").attr("id","area-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("y1",k(0)).attr("x2",x(d.length)).attr("y2",0).selectAll("stop").data([{offset:"0%",color:"#EE8E6A"},{offset:"1%",color:"#E49369"},{offset:"10%",color:"#CD9968"},{offset:"20%",color:"#B59F67"},{offset:"30%",color:"#9EA566"},{offset:"40%",color:"#87AA66"},{offset:"50%",color:"#71AF65"},{offset:"60%",color:"#5BB564"},{offset:"80%",color:"#46BB63"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),A.append("path").attr("transform","translate(120, 20)").datum(t.reverse()).attr("class","line").attr("d",b),A.selectAll(".point").data(t).enter().append("g").classed("point",!0).attr("transform",function(t,e){return"translate("+(x(e)+120)+","+k(t)+" )"})),w=(z.append("circle").attr("r","3").attr("cy","20"),z.append("text").text(function(t){return"$"+numberWithCommas(t)}).attr("text-anchor","middle"),d3.select(".line-graph").append("svg").attr({width:f+100,height:50}).selectAll(".legend").data(_.clone(d).reverse()).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate("+-(e*g)+", 0)"}));w.append("circle").attr("r","8").attr("cy","10").attr("cx",f+15).style("fill",m),w.append("text").attr("x",f).attr("y",9).attr("dy",".35em").style("text-anchor","end").style("font-size",12).text(function(t){return t})}function r(t,e){var a=260,r=260,n=Math.min(a,r)/2,l=d3.scale.ordinal().range(["#5ECF80","#4A90E2","#FF9572"]),s=d3.layout.pie().sort(null),i=d3.svg.arc().innerRadius(n-80).outerRadius(n-50),c=d3.select("."+e).append("svg").attr("width",a).attr("height",r).attr("viewBox","0 0 "+a+" "+r).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+a/2+","+r/3+")");c.selectAll("path").data(s(t)).enter().append("path").attr("fill",function(t,e){return l(e)}).attr("d",i)}var n=["Worst","20%","40%","Median","60%","80%"],l=["Worst","1%","5%","10%","20%","40%","Median","60%","80%"],s=["#ff9572","#d29e70","#baa46e","#8dad6d","#77b16d","#60b76b"],i=["#ff9572","#e89a71","#d29e70","#baa46e","#baa46e","#8dad6d","#77b16d","#60b76b","#48bc6a"];return{horizontal:t,vertical:e,line:a,pie:r}}();